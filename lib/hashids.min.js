/*

	Hashids
	http://hashids.org/js
	(c) 2013 Ivan Akimov

	https://github.com/ivanakimov/hashids.js
	hashids may be freely distributed under the MIT license.

*/
var Hashids=function(){"use strict";function t(t,s,e){var h,i,n,r,a,p,l;for(this.version="1.0.0",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(s,10)>0?s:0,this.salt="string"==typeof t?t:"","string"==typeof e&&(this.alphabet=e),h="",i=0,r=this.alphabet.length;i!==r;i++)-1===h.indexOf(this.alphabet[i])&&(h+=this.alphabet[i]);if(this.alphabet=h,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(i=0,r=this.seps.length;i!==r;i++)n=this.alphabet.indexOf(this.seps[i]),-1===n?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,n)+" "+this.alphabet.substr(n+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(a=Math.ceil(this.alphabet.length/this.sepDiv),1===a&&a++,a>this.seps.length?(p=a-this.seps.length,this.seps+=this.alphabet.substr(0,p),this.alphabet=this.alphabet.substr(p)):this.seps=this.seps.substr(0,a)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),l=Math.ceil(this.alphabet.length/this.guardDiv),3>this.alphabet.length?(this.guards=this.seps.substr(0,l),this.seps=this.seps.substr(l)):(this.guards=this.alphabet.substr(0,l),this.alphabet=this.alphabet.substr(l))}return t.prototype.encode=function(){var t,s,e="",h=Array.prototype.slice.call(arguments);if(!h.length)return e;for(h[0]instanceof Array&&(h=h[0]),t=0,s=h.length;t!==s;t++)if("number"!=typeof h[t]||0!==h[t]%1||0>h[t])return e;return this._encode(h)},t.prototype.decode=function(t){var s=[];return t.length&&"string"==typeof t?this._decode(t,this.alphabet):s},t.prototype.encodeHex=function(t){var s,e,h;if(t=""+t,!/^[0-9a-fA-F]+$/.test(t))return"";for(h=t.match(/[\w\W]{1,12}/g),s=0,e=h.length;s!==e;s++)h[s]=parseInt("1"+h[s],16);return this.encode.apply(this,h)},t.prototype.decodeHex=function(t){var s,e,h=[],i=this.decode(t);for(s=0,e=i.length;s!==e;s++)h+=i[s].toString(16).substr(1);return h},t.prototype._encode=function(t){var s,e,h,i,n,r,a,p,l,o,u,g,b=this.alphabet,f=t.length,c=0;for(h=0,i=t.length;h!==i;h++)c+=t[h]%(h+100);for(e=s=b[c%b.length],h=0,i=t.length;h!==i;h++)n=t[h],r=e+this.salt+b,b=this.consistentShuffle(b,r.substr(0,b.length)),a=this.hash(n,b),s+=a,f>h+1&&(n%=a.charCodeAt(0)+h,p=n%this.seps.length,s+=this.seps[p]);for(s.length<this.minHashLength&&(l=(c+s[0].charCodeAt(0))%this.guards.length,o=this.guards[l],s=o+s,s.length<this.minHashLength&&(l=(c+s[2].charCodeAt(0))%this.guards.length,o=this.guards[l],s+=o)),u=parseInt(b.length/2,10);s.length<this.minHashLength;)b=this.consistentShuffle(b,b),s=b.substr(u)+s+b.substr(0,u),g=s.length-this.minHashLength,g>0&&(s=s.substr(g/2,this.minHashLength));return s},t.prototype._decode=function(t,s){var e,h,i,n,r=[],a=0,p=RegExp("["+this.guards+"]","g"),l=t.replace(p," "),o=l.split(" ");if((3===o.length||2===o.length)&&(a=1),l=o[a],l[0]!==void 0){for(e=l[0],l=l.substr(1),p=RegExp("["+this.seps+"]","g"),l=l.replace(p," "),o=l.split(" "),a=0,h=o.length;a!==h;a++)i=o[a],n=e+this.salt+s,s=this.consistentShuffle(s,n.substr(0,s.length)),r.push(this.unhash(i,s));this._encode(r)!==t&&(r=[])}return r},t.prototype.consistentShuffle=function(t,s){var e,h,i,n,r,a;if(!s.length)return t;for(n=t.length-1,r=0,a=0;n>0;n--,r++)r%=s.length,a+=e=s[r].charCodeAt(0),h=(e+r+a)%n,i=t[h],t=t.substr(0,h)+t[n]+t.substr(h+1),t=t.substr(0,n)+i+t.substr(n+1);return t},t.prototype.hash=function(t,s){var e="",h=s.length;do e=s[t%h]+e,t=parseInt(t/h,10);while(t);return e},t.prototype.unhash=function(t,s){var e,h,i=0;for(h=0;t.length>h;h++)e=s.indexOf(t[h]),i+=e*Math.pow(s.length,t.length-h-1);return i},"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define(function(){return t}),t}();